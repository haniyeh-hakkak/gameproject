<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Skeleton</title>
    <script type="text/javascript" src="lib/three.js"></script>
    <script src="lib/THREEx.KeyboardState.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>


<div id="WebGL-output">
</div>

<script type="text/javascript">
    var scene, camera, renderer;
    var cube, cube2;
    var  directionalLight, spotLight;
    var keyboard = new THREEx.KeyboardState();

    init();
    animate();

    function init() {

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 80, 15);
        camera.lookAt(scene.position);


        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setClearColor(new THREE.Color(0x000000));
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);


        var textureground = new THREE.TextureLoader().load('texture/ground-texture2.jpg');
        textureground.wrapS = THREE.RepeatWrapping;
        textureground.wrapT = THREE.RepeatWrapping;
        textureground.magFilter = THREE.LinearFilter;
        textureground.minFilter = THREE.LinearMipMapLinearFilter;


        var surfaceGeometry = new THREE.PlaneGeometry(100, 150, 1);
        var surfaceMaterial = new THREE.MeshBasicMaterial({color: "0xcccccc", side: THREE.DoubleSide, map:textureground});
        var surfaceMesh = new THREE.Mesh(surfaceGeometry, surfaceMaterial);
        surfaceMesh.rotateX(Math.PI / 2);
        surfaceMesh.position.y = -20;
        scene.add(surfaceMesh);

        var texturewall = new THREE.TextureLoader().load('texture/Wall Various-015.jpg');
        texturewall.wrapS = THREE.RepeatWrapping;
        texturewall.wrapT = THREE.RepeatWrapping;
        texturewall.magFilter = THREE.LinearFilter;
        texturewall.minFilter = THREE.LinearMipMapLinearFilter;

        var texturewall2 = new THREE.TextureLoader().load('texture/Various-007.jpg');
        texturewall2.repeat.set(2,1);
        texturewall2.wrapS = THREE.RepeatWrapping;
        texturewall2.wrapT = THREE.RepeatWrapping;
        texturewall2.magFilter = THREE.LinearFilter;
        texturewall2.minFilter = THREE.LinearMipMapLinearFilter;

        var surfaceGeometry = new THREE.PlaneGeometry(100, 10, 1);
        var surfaceMaterial = new THREE.MeshBasicMaterial({color: "#0xcccccc", side: THREE.DoubleSide,  map:texturewall});
        var wall1 = new THREE.Mesh(surfaceGeometry, surfaceMaterial);
        wall1.position.x = 0;
        wall1.position.y = -15;
        wall1.position.z = -75;
        scene.add(wall1);

        var surfaceGeometry = new THREE.PlaneGeometry(100, 10, 1);
        var surfaceMaterial = new THREE.MeshBasicMaterial({color: "#0xcccccc", side: THREE.DoubleSide,  map:texturewall});
        var wall2 = new THREE.Mesh(surfaceGeometry, surfaceMaterial);
        wall2.position.x = 0;
        wall2.position.y = -15;
        wall2.position.z = 75;
        scene.add(wall2);


        var surfaceGeometry = new THREE.PlaneGeometry(150, 10, 1);
        var surfaceMaterial = new THREE.MeshBasicMaterial({color: "#808080", side: THREE.DoubleSide ,map:texturewall2});
        var wall3 = new THREE.Mesh(surfaceGeometry, surfaceMaterial);
        wall3.rotateY(Math.PI / 2);
        wall3.position.x = -50;
        wall3.position.y = -15;
        wall3.position.z = 0;
        scene.add(wall3);

        var surfaceGeometry = new THREE.PlaneGeometry(150, 10, 1);
        var surfaceMaterial = new THREE.MeshBasicMaterial({color: "#808080", side: THREE.DoubleSide, map:texturewall2});
        var wall4 = new THREE.Mesh(surfaceGeometry, surfaceMaterial);
        wall4.rotateY(Math.PI / 2);
        wall4.position.x = 50;
        wall4.position.y = -15;
        wall4.position.z = 0;
        scene.add(wall4);


        var geometry = new THREE.BoxGeometry( 15, 7, 5 );
        var material = new THREE.MeshBasicMaterial( {color: "#800000"} );
        cube = new THREE.Mesh( geometry, material );
        cube.position.y=-15;
        cube.position.z=-70;
        scene.add( cube );

        var geometry = new THREE.BoxGeometry( 15, 7, 5 );
        var material = new THREE.MeshBasicMaterial( {color: "#800000"} );
        cube2 = new THREE.Mesh( geometry, material );
        cube2.position.y=-15;
        cube2.position.z=70;
        scene.add( cube2 );

        var geometry = new THREE.SphereGeometry( 3, 32, 32 );
        var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );
        var sphere = new THREE.Mesh( geometry, material );
        sphere.position.y= -15;
        scene.add( sphere );

        var axesHelper = new THREE.AxisHelper(4);
        axesHelper.rotateY(Math.PI * 3 / 2);
        scene.add(axesHelper);
    }

    function animate() {
        if(keyboard.pressed("left") && cube.position.x>-42){
            cube.position.x -=1;
        }
        else if(keyboard.pressed("right") && cube.position.x<42){
            cube.position.x +=1;
        }
        if(keyboard.pressed("A") && cube2.position.x>-42){
            cube2.position.x -=1;
        }
        else if(keyboard.pressed("D") && cube2.position.x<42){
            cube2.position.x +=1;
        }
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    }

</script>
</body>
</html>